<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>TribeDB - MySQL分表分库数据中间件 for Node.js</title>
    <link href="http://cdn.bootcss.com/highlight.js/8.1/styles/atelier-forest.light.min.css" rel="stylesheet">
    <link rel='stylesheet' href='style.css'>

  </head>
  <body>
    <h1>TribeDB - 分布式集群储存框架 - Node.js</h1>
    <p>TribeDB 是一个MySQL分表分库数据中间件，实现MySQL数据的分布式集群储存管理。在处理海量数据、高并发访问时，获得更加优越的性能及横向扩展能力。它包含以下主要特性:</p>
    <ul>
      <li>可伸缩、高扩展的架构</li>
      <li>自动路由分库，维护数据库连接池</li>
      <li>支持数据表的“横向”和“纵向”分表</li>
      <li>支持“一主多从”式读写分离</li>
      <li>分布式并行处理，成倍提升性能</li>
      <li>对应用层隐藏数据来源及技术细节</li>
    </ul>
    <p>拥有以上特点意味着，可随时通过增加普通级别数据库服务器的方式，方便地扩展整体系统性能，而无需修改业务层架构和代码。理论上TribeDB的扩展能力上线在于主库单表插入性能和主从数据同步开销。通过合理设计“横向”和“纵向”分表和数据切分粒度，可轻松应对上亿级别的数据量和访问请求。</p>
    <p>本文档包括 TribeDB 详细API说明和对应的最优数据库设计建议。</p>

    <a href="https://github.com/yangjiePro/TribeDB"><img style="position: fixed; top: 0; right: 0; border: 0;" src="fork.png" alt="Fork me on GitHub"></a>

    <div class="example">
      <a name="example"></a>
      <h3> 快速上手：</h3>
        <pre class="source"><code>
var tribe = require('tribedb');
//载入配置文件，sync选项为true 表示同步读取解析配置文件
tribe.configure('/path/to/tribe.conf',{sync:true});
//通过数据库表名建立查询请求
var db = tribe.createQuery('my_table');
//插入封装
db.data({title:'标题'}).insert(function(err, data){
  console.log(err);
  console.log(data);
});
//查询封装
db.where('title','标题').order_by('time','DESC').limit(1).select(function(err, data){
  console.log(err);
  console.log(data);
});
//不使用封装的操作，直接执行sql
tribe.query('SELECT * FROM user_0 WHERE id=1 LIMIT 1',function(err, data){
  console.log(err);
  console.log(data);
});
      </code></pre>
    </div>
    <p>TribeDB 通过全局唯一的表名，自动连接对应的数据库，并通过分表配置，将操作映射到涉及的分表，同时完成读写分离。
    一切都由 TribeDB 自动完成，业务层不必关心数据的位置。当数据库负载过高需要添加服务器时，只需简单修改配置文件而不必修改业务代码，甚至将整个架构推倒重来。继续阅读本文档详细了解如何使用。</p>

    <div class="example">
      <a name="example"></a>
      <h3> 快速上手：</h3>
    </div>

    <div class="example">
      <a name="configure"></a>
      <h3>configure([src], [opt], [callback])　载入或返回配置。</h3>
      <div class="param">
        <p><em>src</em>=<var>[path]</var>：从文件路径读取配置。</p>
        <p><em>src</em>=<var>[url]</var>：从url读取配置。</p>
        <p><em>src</em>=<var>[string]</var>：载入配置文件正文。</p>
        <p><em>src</em>=<var>undefined</var>：表示返回从本地读取或从网络下载的配置文件正文。</p>
      </div>
      <div class="param">
        <p><em>opt</em><var>object</var>：配置选项（可省略）</p>
        <p><em>opt.sync</em><var>boolen</var>：是否以同步方式读取解析配置文件。（注意：url加载配置时始终为异步方式）。</p>
      </div>
      <div class="param">
        <p><em>callback</em><var>function</var>：配置文件加载并解析完成后的回调</p>
      </div>
      <p>一般情况下，在Node.js程序启动时载入配置。当异步载入配置时，若立即调用数据操作函数将返回配置错误信息，需要等待配置加载并解析完成。
      </p>
    </div>

    <div class="example">
      <a name="configure-format"></a>
      <h3>配置文件格式详解</h3>
    </div>


























<script type="text/javascript" src="http://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/highlight.js/8.1/highlight.min.js"></script>
<script src="http://cdn.bootcss.com/highlight.js/8.1/languages/python.min.js"></script>

<script type="text/javascript">

  //hljs.configure({useBR: true});

  $('code').each(function(i, block) {
    hljs.highlightBlock(block);
  });


</script>


  </body>
</html>

